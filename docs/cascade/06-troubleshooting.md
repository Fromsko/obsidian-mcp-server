# 第六章：故障排除指南

## 6.1 常见问题

### Cascade 不显示

#### 症状
- Cascade 面板不出现
- 点击图标无响应
- 快捷键无效

#### 可能原因
1. **网络连接问题**
2. **登录状态过期**
3. **插件冲突**
4. **缓存问题**

#### 解决方案
```markdown
# 逐步排查流程

1. 检查网络连接
   - 确认互联网连接正常
   - 尝试访问其他在线服务
   - 检查防火墙设置

2. 验证登录状态
   - 重新登录 Windsurf 账户
   - 检查账户是否有效
   - 确认订阅状态

3. 重启应用
   - 完全关闭 Windsurf
   - 清除应用缓存
   - 重新启动应用

4. 检查插件
   - 禁用其他插件
   - 逐个启用排查冲突
   - 更新插件版本

5. 重置设置
   - 备份当前设置
   - 重置到默认配置
   - 重新配置
```

### 响应缓慢

#### 症状
- Cascade 响应时间过长
- 频繁超时
- 生成中断

#### 可能原因
1. **模型负载过高**
2. **网络延迟**
3. **上下文过大**
4. **系统资源不足**

#### 解决方案
```markdown
# 性能优化步骤

1. 模型选择
   - 切换到更快的基础模型
   - 避免高峰期使用
   - 考虑升级计划

2. 上下文优化
   - 减少不必要的上下文
   - 分批处理大任务
   - 使用文件引用而非复制

3. 网络优化
   - 检查网络速度
   - 使用有线连接
   - 更换 DNS 服务器

4. 系统资源
   - 关闭其他应用
   - 增加内存分配
   - 检查磁盘空间
```

### 无法编辑文件

#### 症状
- Cascade 无法创建文件
- 无法修改现有文件
- 权限错误

#### 可能原因
1. **文件权限问题**
2. **文件被锁定**
3. **磁盘空间不足**
4. **路径问题**

#### 解决方案
```markdown
# 文件权限修复

1. 检查文件权限
   - 确认文件可写权限
   - 检查目录权限
   - 验证用户权限

2. 解锁文件
   - 关闭占用文件的应用
   - 检查文件锁定状态
   - 重启系统

3. 磁盘空间
   - 清理临时文件
   - 移动大文件
   - 扩展存储空间

4. 路径验证
   - 使用绝对路径
   - 检查特殊字符
   - 验证路径存在
```

## 6.2 IDE 特定问题

### VS Code 问题

#### 常见错误
```
e.split is not defined
Unable to read file .../package.json
Not seeing Codeium Chat responses
```

#### 解决方案
```markdown
# VS Code 特定修复

1. 扩展问题
   - 重新安装 Codeium 扩展
   - 清除扩展缓存
   - 更新到最新版本

2. 工作区问题
   - 重新打开工作区
   - 检查 .vscode 设置
   - 重置工作区设置

3. 配置文件
   - 检查 settings.json
   - 验证 extensions.json
   - 修复配置错误

4. 权限问题
   - 检查文件夹权限
   - 运行 VS Code 作为管理员
   - 修复用户配置
```

### JetBrains IDE 问题

#### 常见问题
- **Cascade 不显示**
- **证书问题**
- **自定义工作空间问题**

#### 解决方案
```markdown
# JetBrains IDE 修复

1. 插件安装
   - 从 JetBrains Marketplace 安装
   - 验证插件兼容性
   - 重启 IDE

2. 证书问题
   - 导入正确的证书
   - 更新证书存储
   - 检查系统时间

3. 工作空间配置
   - 重新配置工作空间
   - 检查项目设置
   - 验证插件配置

4. 远程开发
   - 检查远程连接
   - 验证 SSH 配置
   - 更新远程插件
```

### Visual Studio 问题

#### 常见问题
- **Marketplace 中看不到 Codeium**
- **重叠的自动完成建议**
- **Tab 键不总是接受建议**

#### 解决方案
```markdown
# Visual Studio 修复

1. Marketplace 问题
   - 更新 Visual Studio
   - 清除 Marketplace 缓存
   - 手动下载扩展

2. 自动完成冲突
   - 调整 IntelliSense 设置
   - 配置优先级
   - 禁用冲突扩展

3. 键盘快捷键
   - 重置键盘映射
   - 自定义快捷键
   - 检查输入法冲突
```

## 6.3 网络和连接问题

### 代理配置

#### Windows 代理配置
```markdown
# Windows 代理设置步骤

1. 检查系统代理
   - 打开设置 > 网络和 Internet > 代理
   - 记录代理服务器地址和端口
   - 确认认证信息

2. Windsurf 代理设置
   - 打开 Windsurf 设置
   - 搜索 "proxy"
   - 配置代理设置

3. 环境变量
   - 设置 HTTP_PROXY
   - 设置 HTTPS_PROXY
   - 设置 NO_PROXY（如需要）

4. 测试连接
   - 重启 Windsurf
   - 测试网络连接
   - 验证代理工作
```

#### macOS/Linux 代理配置
```markdown
# Unix 系统代理配置

1. 环境变量设置
   ```bash
   export HTTP_PROXY=http://proxy.company.com:8080
   export HTTPS_PROXY=http://proxy.company.com:8080
   export NO_PROXY=localhost,127.0.0.1
   ```

2. Shell 配置
   - 添加到 ~/.bashrc 或 ~/.zshrc
   - 重新加载配置
   - 验证变量设置

3. 应用配置
   - Windsurf 设置 > 代理
   - 选择"检测系统代理"
   - 测试连接
```

### 防火墙和安全软件

#### 问题排查
```markdown
# 防火墙问题诊断

1. 识别阻塞
   - 检查防火墙日志
   - 识别被阻止的域名
   - 记录端口使用情况

2. 域名白名单
   ```
   需要白名单的域名：
   - api.codeium.com
   - docs.windsurf.com
   - windsurf.com
   - *.codeium.com
   ```

3. 端口配置
   - HTTPS (443)
   - HTTP (80)
   - WebSocket (可选)

4. 安全软件
   - 暂时禁用测试
   - 添加例外规则
   - 更新安全软件
```

## 6.4 认证和订阅问题

### 登录问题

#### 常见错误
- **无法登录**
- **会话过期**
- **认证失败**

#### 解决方案
```markdown
# 认证问题修复

1. 清除缓存
   - 清除浏览器缓存
   - 清除应用缓存
   - 清除认证令牌

2. 重新认证
   - 注销当前账户
   - 清除保存的密码
   - 重新登录

3. 账户验证
   - 检查邮箱验证
   - 确认账户状态
   - 重置密码（如需要）

4. 网络检查
   - 验证网络连接
   - 检查时间同步
   - 测试其他服务
```

### 订阅和计费问题

#### 常见问题
- **功能限制**
- **信用不足**
- **计划升级问题**

#### 解决方案
```markdown
# 订阅问题解决

1. 计划验证
   - 检查当前计划
   - 验证功能权限
   - 确认计费状态

2. 信用管理
   - 查看信用余额
   - 设置自动充值
   - 监控使用情况

3. 计划升级
   - 比较计划功能
   - 选择合适计划
   - 完成升级流程

4. 计费支持
   - 联系客服
   - 提供账户信息
   - 说明问题详情
```

## 6.5 性能问题

### 系统资源

#### 内存使用优化
```markdown
# 内存优化策略

1. 应用设置
   - 调整内存分配
   - 关闭不必要的功能
   - 配置垃圾回收

2. 系统优化
   - 关闭其他应用
   - 增加虚拟内存
   - 清理系统缓存

3. 项目优化
   - 排除大文件
   - 使用 .codeiumignore
   - 分割大型项目

4. 监控工具
   - 任务管理器
   - 活动监视器
   - 内存分析工具
```

#### CPU 使用优化
```markdown
# CPU 优化方法

1. 后台进程
   - 识别高 CPU 进程
   - 调整进程优先级
   - 限制并发数量

2. 编译优化
   - 增量编译
   - 并行编译
   - 缓存编译结果

3. 插件管理
   - 禁用重型插件
   - 优化插件配置
   - 更新插件版本
```

### 磁盘 I/O 优化

#### 存储优化
```markdown
# 磁盘性能优化

1. 磁盘空间
   - 清理临时文件
   - 压缩大文件
   - 移动到外部存储

2. 索引优化
   - 重建文件索引
   - 优化搜索索引
   - 排除不必要的文件

3. 缓存管理
   - 配置缓存大小
   - 定期清理缓存
   - 使用 SSD 缓存
```

## 6.6 错误代码和消息

### 常见错误代码

#### 网络错误
```markdown
# 网络相关错误

ECONNREFUSED - 连接被拒绝
原因：服务器不可达或端口被阻塞
解决：检查网络连接和防火墙设置

ETIMEDOUT - 连接超时
原因：网络延迟或服务器响应慢
解决：检查网络速度，更换网络

ENOTFOUND - 域名解析失败
原因：DNS 问题或域名不存在
解决：检查 DNS 设置，验证域名
```

#### 认证错误
```markdown
# 认证相关错误

401 Unauthorized - 未授权
原因：认证信息无效或过期
解决：重新登录，更新令牌

403 Forbidden - 禁止访问
原因：权限不足或计划限制
解决：检查权限，升级计划

429 Too Many Requests - 请求过多
原因：超出速率限制
解决：等待后重试，升级计划
```

#### 系统错误
```markdown
# 系统相关错误

ENOMEM - 内存不足
原因：系统内存耗尽
解决：释放内存，增加虚拟内存

ENOSPC - 磁盘空间不足
原因：存储空间已满
解决：清理磁盘，扩展存储

EACCES - 权限被拒绝
原因：文件或目录权限不足
解决：修改权限，使用管理员权限
```

## 6.7 日志收集和诊断

### 收集诊断信息

#### Windows 日志收集
```powershell
# Windows 诊断脚本

# 1. 系统信息
systeminfo > system_info.txt

# 2. 网络配置
ipconfig /all > network_config.txt

# 3. 进程信息
tasklist /v > process_list.txt

# 4. 事件日志
wevtutil qe System /c:100 > system_events.txt

# 5. Windsurf 日志
dir "%APPDATA%\Codeium\logs" /s /b > windsurf_logs.txt
```

#### macOS 日志收集
```bash
# macOS 诊断脚本

# 1. 系统信息
system_profiler SPSoftwareDataType > system_info.txt

# 2. 网络配置
ifconfig > network_config.txt

# 3. 进程信息
ps aux > process_list.txt

# 4. 系统日志
log show --last 1h > system_logs.txt

# 5. Windsurf 日志
find ~/Library/Application\ Support/Codeium -name "*.log" > windsurf_logs.txt
```

#### Linux 日志收集
```bash
# Linux 诊断脚本

# 1. 系统信息
uname -a > system_info.txt
lsb_release -a >> system_info.txt

# 2. 网络配置
ip addr show > network_config.txt

# 3. 进程信息
ps aux > process_list.txt

# 4. 系统日志
journalctl --since "1 hour ago" > system_logs.txt

# 5. Windsurf 日志
find ~/.codeium -name "*.log" > windsurf_logs.txt
```

### 问题报告模板

#### 基本信息
```markdown
## 问题报告

### 基本信息
- 操作系统：
- Windsurf 版本：
- IDE 版本：
- 问题发生时间：

### 问题描述
- 详细描述问题：
- 复现步骤：
- 期望结果：
- 实际结果：

### 环境信息
- 网络环境：
- 代理设置：
- 防火墙配置：
- 其他相关软件：

### 错误信息
- 错误消息：
- 错误代码：
- 日志文件：

### 附件
- 系统信息文件
- 日志文件
- 截图（如适用）
```

## 6.8 预防性维护

### 定期检查清单

#### 每周检查
```markdown
# 每周维护清单

□ 检查网络连接稳定性
□ 清理临时文件和缓存
□ 更新 Windsurf 和插件
□ 检查磁盘空间使用
□ 备份重要配置文件
□ 检查系统资源使用情况
```

#### 每月检查
```markdown
# 每月维护清单

□ 全面系统扫描
□ 更新系统安全补丁
□ 检查订阅和计费状态
□ 清理旧的日志文件
□ 优化项目配置
□ 检查备份完整性
```

### 监控设置

#### 性能监控
```markdown
# 性能监控指标

1. 响应时间
   - Cascade 响应时间
   - 文件操作时间
   - 网络请求延迟

2. 资源使用
   - CPU 使用率
   - 内存使用量
   - 磁盘 I/O

3. 错误率
   - 网络错误
   - 认证错误
   - 系统错误
```

#### 告警配置
```markdown
# 告警阈值设置

- 响应时间 > 30 秒
- 内存使用 > 80%
- 磁盘空间 < 10%
- 错误率 > 5%
- 连接失败 > 3 次/小时
```

---

*本章提供了全面的故障排除指南，帮助用户快速诊断和解决常见问题。*
